from crewai import Agent, Task, Crew
from langchain_openai import ChatOpenAI
import os
os.environ["OPENAI_API_KEY"] = "NA"

llm = ChatOpenAI(
    model = "crewai-llama3",
    base_url = "http://localhost:11434/v1")

general_agent = Agent(role = "Senior Pentester Teacher",
                      goal = """Provide the solution to the students that are asking cybersecuritty questions and give them suggestions.""",
                      backstory = """You are an excellent veteran elite Pentester now acting as a professor. You are excellent at helping students to solve cybersecuritty questions. You supervise students labs and CTFs. You analyze the situation and always suggest a course of action to novice students.""",
                      allow_delegation = False,
                      verbose = True,
                      llm = llm)

description = input("Your question: \n")
task = Task (description=description,
             agent = general_agent,
             expected_output="Actual situation,  suggested course of action and additional commentary if pertinentI")

crew = Crew(
            agents=[general_agent],
            tasks=[task],
            verbose=2
        )

result = crew.kickoff()

print(result)
